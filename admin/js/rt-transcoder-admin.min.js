/*! 
 * Transcoder Library 
 * @package Transcoder 
 */

!function(a){a(document).ready(function(){a(document).on("click","#api-key-submit",function(b){b.preventDefault(),0===a(this).next("img").length&&a(this).after(a("<img />").attr("src",rt_transcoder_script.loader_image).addClass("rtt-loader"));var c={action:"rt_enter_api_key",apikey:a("#new-api-key").val()};a.getJSON(ajaxurl,c,function(b){if(void 0===b.error&&b.apikey){var c=window.location.href,d=window.location.hash;c=c.replace(d,""),-1==c.toString().indexOf("&apikey="+b.apikey)&&(c+="&apikey="+b.apikey),-1==c.toString().indexOf("&update=true")&&(c+="&update=true"),document.location.href=c+d}else{a("#api-key-error").remove();var e=a("<div/>",{id:"api-key-error",class:"error"});a("h1:first").after(e.html(a("<p />").text(b.error)))}a("#api-key-submit").next("img").remove()})}),a(document).on("click","#disable-transcoding",function(b){if(b.preventDefault(),confirm(rt_transcoder_script.disable_encoding)){var c={action:"rt_disable_transcoding"};0===a(this).next("img").length&&a(this).after(a("<img />").attr("src",rt_transcoder_script.loader_image).addClass("rtt-loader")),a.post(ajaxurl,c,function(b){b&&(a("#rtt-settings_updated").length>0&&(a("#rtt-settings_updated p").html(b),a("#rtt-settings_updated").show()),a("#disable-transcoding").next("img").remove(),a("#disable-transcoding").hide(),a("#enable-transcoding").css("display","inline"))})}}),a(document).on("click","#enable-transcoding",function(b){if(b.preventDefault(),confirm(rt_transcoder_script.enable_encoding)){var c={action:"rt_enable_transcoding"};0===a(this).next("img").length&&a(this).after(a("<img />").attr("src",rt_transcoder_script.loader_image).addClass("rtt-loader")),a.post(ajaxurl,c,function(b){b?(a("#rtt-settings_updated").length>0&&(a("#rtt-settings_updated p").html(b),a("#rtt-settings_updated").show()),a("#enable-transcoding").next("img").remove(),a("#enable-transcoding").hide(),a("#disable-transcoding").css("display","inline")):a("#settings-error-transcoding-disabled").remove()})}})})}(jQuery);