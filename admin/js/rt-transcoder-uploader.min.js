(()=>{var e;(e=jQuery)(document).ready((function(){if("undefined"==typeof wp||void 0===wp.Uploader)return void console.error("wp.Uploader is not available.");const t=new Map;function n(n){const s=e('<div class="transcoder-progress-bar" style="display: none;">\n                    <div class="progress" style="width: 0%;">\n                        <span class="progress-text">0%</span>\n                    </div>\n                </div>'),r=e(`.attachments .attachment[data-id="${n}"] .attachment-preview`);r.length&&(r.append(s),t.set(n,s),o(n))}function o(n){const s=t.get(n);s&&e.ajax({url:`${transcoderSettings.restUrl}/${n}`,method:"GET",beforeSend:e=>e.setRequestHeader("X-WP-Nonce",transcoderSettings.nonce),success:function(e){const r=parseFloat(e.progress)||0;s.show(),s.find(".progress").css("width",`${r}%`),s.find(".progress-text").text(`${r}%`),r<100?setTimeout((()=>o(n)),5e3):(s.remove(),t.delete(n))},error:function(){setTimeout((()=>o(n)),5e3)}})}setTimeout((function(){const e=wp.media.query({type:"video",posts_per_page:-1});e.more().done((function(){e.models.forEach((function(e){n(e.id)}))}))}),500),wp.Uploader.queue.on("add",(function(e){wp.Uploader.queue.on("reset",(function(){"video"===e.attributes.type&&(attachmentId=e.id,n(attachmentId))}))}))}))})();